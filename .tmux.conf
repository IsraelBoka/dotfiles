set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'niksingh710/minimal-tmux-status'

# set -g @plugin 'egel/tmux-gruvbox'
# set -g @tmux-gruvbox 'dark' # or 'light'
set -s default-terminal "tmux-256color"
set-option -sa terminal-overrides ",xterm*:Tc"
set-option -g allow-rename off
set -g mode-keys vi
# # Unbind default prefix since it's unintuitive
# unbind C-b
# # Assign it to more approachable Ctrl + Space
# set-option -g prefix C-Space

set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'jaclu/tmux-menus'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'trevarj/tmux-open-nvim'
set -g @plugin 'tmux-plugins/tmux-sidebar'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'xamut/tmux-weather'
set -g @plugin 'vascomfnunes/tmux-clima'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'kenos1/tmux-cht-sh'
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'
set -g @plugin 'samoshkin/tmux-plugin-sysstat'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'
# set -g @plugin 'thewtex/tmux-mem-cpu-load'
# set -g @plugin 'tmux-plugins/tmux-continuum'

set -g @minimal-tmux-fg "#404040,italics,bold"
set -g @minimal-tmux-bg "#F5C2E7,italics,bold"
# set -g @minimal-tmux-bg "#CBA6F9"
#
set -g message-style bg=black,fg=white
set -g @minimal-tmux-justify "centre"
set -g @minimal-tmux-indicator-str "  tmux  "
set -g @minimal-tmux-indicator true
set -g @minimal-tmux-status "bottom"
# set -g @floax-bind  'a' 
# set -g @minimal-tmux-status "bottom"
#
# # Enables or disables the left and right status bar
set -g @minimal-tmux-right true
set -g @minimal-tmux-left true
#
# # expanded icon (fullscreen icon)
set -g @minimal-tmux-expanded-icon "   "
#
# # on all tabs (default is false)
# # false will make it visible for the current tab only
set -g @minimal-tmux-show-expanded-icons-for-all-tabs true
#
# # To add or remove extra text in status bar
# set -g @minimal-tmux-status-right-extra "              "
# set -g @minimal-tmux-status-left-extra "               "
#
# # Not recommended to change these values
set -g @minimal-tmux-status-right "#S"
# set -g @minimal-tmux-status-left "refer to code"
#
# # If getting strings cut in left status or right
# # Here 20 is the length of the characters in the string
set -g status-right-length 20
set -g status-left-length 20

# set -g @plugin '2kabhishek/tmux2k'
# set -g @tmux2k-theme 'catppuccin'
# # set -g @tmux2k-theme 'duo'
# set -g @tmux2k-icons-only false
# # set the left and right plugin sections
# set -g @tmux2k-left-plugins "git cpu ram"
# set -g @tmux2k-right-plugins "battery time"
#
#
# # to set window list alignment (centre by default)
# set -g @tmux2k-window-list-alignment 'centre'
#
# # to enable compact window list size
# set -g @tmux2k-compact-windows true
#
# # change refresh rate
# set -g @tmux2k-refresh-rate 5
#
# # weather scale
# set -g @tmux2k-show-fahrenheit false
#
# # 24 hour time
# set -g @tmux2k-military-time true
#
# # network interface to watch
# set -g @tmux2k-network-name "wlo1"
#---


# maybe some other time
# set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'

# --- tmux-sidebar config ---
# set -g @sidebar-tree-command 'lsd'
# set the shortcut to (Ctrl+Space) + e
# set -g @sidebar-tree 'e'
# set -g @sidebar-tree-focus 'E'
# set -g @sidebar-tree-pager 'less'
# set -g @sidebar-tree-command 'tree -C'
# set -g @sidebar-tree-width '60'
# ---

# --- tmux-fzf-url config ---
set -g @fzf-url-history-limit '2000'
# ----

# --- tmux-fzf config --- 
# setup the launch shortcut to Ctrl + F
TMUX_FZF_LAUNCH_KEY="f"
# setup the options
TMUX_FZF_OPTIONS="-p -w 62% -h 60% -m"
TMUX_FZF_PANE_FORMAT="[#{window_name}] #{pane_current_command}  [#{pane_width}x#{pane_height}] [history #{history_size}/#{history_limit}, #{history_bytes} bytes] #{?pane_active,[active],[inactive]}"
# ---

# --- yazi specifics ---
set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM
# ---

# --- tmux-resurrect config ---
# ---

# Enable neovim restore
set -g @resurrect-strategy-nvim 'session'
set -g @resurrect-capture-pane-contents 'off'
# Enable continuum for autosaving
# set -g @continuum-restore 'on'
# ----------------------------

# --- Session-X config --- 

# I recommend using `o` if not already in use, for least key strokes when launching
set -g @sessionx-bind 'o'

# Open new tmux window with a file to open in nvim
set -g @ton-open-strategy ":e"


# --- TMUX SESSION X ---

# This is to support quick switch of sessions
# Only after other actions (e.g. rename) will the current session appear
# Setting this option to 'false' changes this default behavior
set -g @sessionx-filter-current 'false'
# -------------------------
bind-key C-Space send-prefix
bind-key v split-window -h
bind-key s split-window -v
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
bind-key x kill-pane # skip "kill-pane 1? (y/n)" prompt
set -g detach-on-destroy off  # don't exit from tmux when closing a session
bind-key -n M-k display-popup -E -w 40% "sesh connect \"$(
  sesh list -i | gum filter --limit 1 --no-sort --fuzzy --placeholder 'Pick a sesh' --height 50 --prompt='⚡'
)\""

run '~/.tmux/plugins/tpm/tpm'
